Docs used - [Official Zod Docs](https://zod.dev/)
## **1. Install Zod**

```bash
npm install zod
```


---

## **2. Folder Structure (per feature-based architecture)**

  

Zod schemas live beside the feature they validate.

```
src/features/contact-form/
    ContactForm.astro
    contact.schema.ts     ← Zod schema
    submit.ts             ← Server validation + logic
```

This keeps:

- schema
    
- server action
    
- UI together and isolated from other features.

---

## **3. Create the Schema**

  

**File:** src/features/contact-form/contact.schema.ts

```ts
import { z } from "zod";

export const contactSchema = z.object({
  name: z.string().min(2, "Name must be at least 2 characters."),
  email: z.string().email("Enter a valid email."),
  message: z.string().min(10, "Message must be at least 10 characters."),
});

export type ContactFormData = z.infer<typeof contactSchema>;
```

This gives:

- runtime validation
    
- compile-time TypeScript inference
    
- typed safeParse results
    

---

## **4. Temporary Schema Testing (Node + TSX)**

  

To debug Zod schemas outside Astro, you installed:

``` bash
npm install -D tsx
```

TSX lets you run .ts files instantly:

- no config
    
- ESM support
    
- perfect for debugging Zod
    

---

### **Debug File Example**

  

debug/zod/contact-form-test.ts

```ts
import { contactSchema } from "../../src/features/contact-form/contact.schema";

const result = contactSchema.safeParse({
  name: "",
  email: "not-an-email",
  message: "hi",
});

if (result.success) {
  console.log("✅ OK:", result.data);
} else {
  console.log("❌ FAILED");
  console.dir(result.error.format(), { depth: null });
}
```

Run:

```bash
npx tsx debug/zod/contact-form-test.ts
```
