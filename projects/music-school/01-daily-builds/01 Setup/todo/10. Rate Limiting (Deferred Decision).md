## **Rate Limiting (Deferred Decision)**

  

### **Current decision**

  

**Rate limiting is intentionally NOT implemented.**

  

This project does **not currently require** rate limiting due to:

- Low traffic profile (brochure-style solicitor sites)
    
- No authentication endpoints
    
- No public APIs
    
- Honeypot + server-side validation already blocking spam cheaply
    
- No expensive side effects per request
    

  

**Status:** ❌ Not implemented

**Decision:** ✅ Explicitly deferred (by design)

---

### **When this will be revisited**

  

Rate limiting will be considered **only if** one or more of the following occurs:

- Sustained or abusive traffic observed
    
- Spam bypasses honeypot at scale
    
- Authentication or login endpoints are added
    
- Expensive operations are introduced (PDFs, AI, DB writes)
    
- Client explicitly requests rate limiting
    
- Vercel analytics show abnormal request patterns
    

  

Until then, adding rate limiting would be **premature optimisation**.

---

### **Planned implementation (if needed later)**

  

If rate limiting becomes necessary, it will be implemented **server-side** using a shared store.

  

**Important constraint (Vercel):**

- ❌ Do **not** use in-memory counters
    
    (serverless instances reset and scale horizontally)
    
- ✅ Use a **shared external store**
    

  

**Preferred options (in order):**

1. **Vercel KV** (preferred on Vercel – fewer moving parts)
    
2. **Upstash Redis** (acceptable alternative)
    

  

No decision between these is needed until rate limiting is justified.

---

### **Testing strategy (deferred)**

  

Tests for rate limiting and origin validation will be written **only after** the feature exists.

  

**What will be tested after implementation:**

- Requests exceeding the limit return **429 Too Many Requests**
    
- Requests from invalid origins are rejected
    
- Valid requests continue to pass normally
    

  

**Important:**

No placeholder tests should exist before rate limiting is implemented.

---

### **Related notes**

- Honeypot hits are **not logged in production** (to avoid noise and cost)
    
- Console logs like HONEYPOT TRIGGERED are **dev-only**
    
- Security is layered: validation → honeypot → (rate limit later if needed)
    
