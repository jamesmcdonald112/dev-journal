> **Rate limiting (deferred)**

> Add IP-based rate limiting if traffic increases or abuse is observed.

> Likely implementation: Vercel KV or Upstash Redis.

> Not required for current traffic levels.

**Status:** ❌ Not implemented yet

**Decision:** **Planned, not required immediately**

  

Once rate limiting and origin checks are added, we will add tests to cover them.

  

What will be tested **after implementation**:

- Requests over the rate limit return **429 Too Many Requests**
    
- Requests from invalid origins are rejected
    
- Valid requests still pass through normally
    

  

**Important constraint (Vercel):**

- ❌ Do **not** use in-memory counters (serverless instances reset and scale)
    
- ✅ Use a **shared external store**
    

  

**Planned storage options (in order):**

1. **Upstash Redis** (best default for Vercel)
    
2. **Vercel KV** (also acceptable)
    

  

**Note:**

These tests are intentionally deferred until rate limiting exists.

No placeholder tests should be written yet.