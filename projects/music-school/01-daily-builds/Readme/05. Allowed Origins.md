Here’s a README note you can paste.

---

## **Allowed Origins (Origin Allowlist) — Required Setup When Reusing This Form**

  

This project hardens the sendInfoPack Astro Action with an **Origin allowlist**. If ALLOWED_ORIGINS is configured, the action **rejects** requests where:

- the Origin header is missing, or
    
- the Origin is not in the allowlist
    

  

### **What you must do when copying this project**

  

#### **1) Set** 

#### **ALLOWED_ORIGINS**

####  **in Vercel (Preview + Production)**

Vercel → Project → **Settings → Environment Variables**

  

Add:

- **Key:** ALLOWED_ORIGINS
    
- **Value:** comma-separated list of _exact_ origins (scheme + host + optional port)
    
- **Environments:** **Preview** and **Production** (and Development if you want)
    

  

Example:

```
ALLOWED_ORIGINS=https://clientdomain.com,https://www.clientdomain.com,https://my-project.vercel.app
```

Important:

- **No trailing slashes** (https://example.com ✅, https://example.com/ ❌)
    
- Must match **exactly** what the browser sends in Origin
    
- Include any extra domains you serve the site on (custom domain + www + vercel.app)
    

  

After setting env vars: **Redeploy**.

  

#### **2) Set** 

#### **ALLOWED_ORIGINS**

####  **locally for dev**

In .env or .env.local, include localhost:

```
ALLOWED_ORIGINS=http://localhost:4321
```

If your dev server runs on a different port, you must update the port accordingly.

  

### **Common failure symptoms**

- Form submits on one domain but fails on another
    
- “Unexpected error” on Vercel preview URLs
    

  

Usually caused by:

- missing the correct vercel.app preview domain in ALLOWED_ORIGINS
    
- trailing slash included
    
- env var not set for the correct Vercel environment (Preview vs Production)
    

---